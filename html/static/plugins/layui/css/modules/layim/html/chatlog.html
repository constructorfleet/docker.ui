 
 
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>Chat记录</title>

<link rel="stylesheet" href="http://local.res.layui.com/layui/src/css/layui.css">
<style>
body .layim-chat-main{height: auto;}
</style>
</head>
<body>

<div class="layim-chat-main">
  <ul id="LAY_view"></ul>
</div>

<div id="LAY_page" style="margin: 0 10px;"></div>


<textarea title="Message Template" id="LAY_tpl" style="display:none;">
{{# layui.each(d.data, function(index, item){
  if(item.id == parent.layui.layim.cache().mine.id){ }}
    <li class="layim-chat-mine"><div class="layim-chat-user"><img src="{{ item.avatar }}"><cite><i>{{ layui.data.date(item.timestamp) }}</i>{{ item.username }}</cite></div><div class="layim-chat-text">{{ layui.layim.content(item.content) }}</div></li>
  {{# } else { }}
    <li><div class="layim-chat-user"><img src="{{ item.avatar }}"><cite>{{ item.username }}<i>{{ layui.data.date(item.timestamp) }}</i></cite></div><div class="layim-chat-text">{{ layui.layim.content(item.content) }}</div></li>
  {{# }
}); }}
</textarea>

<!-- 
This template is used laytpl Syntax:，If you don\'t know, you can read the files：http://www.layui.com/doc/modules/laytpl.html

-->


<script src="http://local.res.layui.com/layui/src/layui.js"></script>
<script>
layui.use(['layim', 'laypage'], function(){
  var layim = layui.layim
  ,layer = layui.layer
  ,laytpl = layui.laytpl
  ,$ = layui.jquery
  ,laypage = layui.laypage;
  
  //Chat记录的分页此处不做演示，You can use itlaypage，I don\'t know：http://www.layui.com/doc/modules/laypage.html
  
  
  //StartRequestChat记录
  var param =  location.search //AccessURLParameters。The windowurlCan not open messageid和type，他们是你RequestChat记录的重要凭据
  
  //实际Use时，Belowres一般是PassAjaxAccess，而此处仅仅只是演示DataFormat
  ,res = {
    code: 0
    ,msg: ''
    ,data: [{
      username: 'Paper aircraft'
      ,id: 100000
      ,avatar: 'http://tva3.sinaimg.cn/crop.0.0.512.512.180/8693225ajw8f2rt20ptykj20e80e8weu.jpg'
      ,timestamp: 1480897882000
      ,content: 'face[Hug] face[心] Hello, beautiful'
    }, {
      username: 'Z_Xiaoqing'
      ,id: 108101
      ,avatar: 'http://tva3.sinaimg.cn/crop.0.0.512.512.180/8693225ajw8f2rt20ptykj20e80e8weu.jpg'
      ,timestamp: 1480897892000
      ,content: 'Are you sure you\'re right？face[Smile]'
    },{
      username: 'Z_Xiaoqing'
      ,id: 108101
      ,avatar: 'http://tva3.sinaimg.cn/crop.0.0.512.512.180/8693225ajw8f2rt20ptykj20e80e8weu.jpg'
      ,timestamp: 1480897898000
      ,content: 'Who are you。。I love Kenshin！I love Kenshin！I love Kenshin！It\'s important to say it three times~'
    },{
      username: 'Z_Xiaoqing'
      ,id: 108101
      ,avatar: 'http://tva3.sinaimg.cn/crop.0.0.512.512.180/8693225ajw8f2rt20ptykj20e80e8weu.jpg'
      ,timestamp: 1480897908000
      ,content: 'Attention：这些都是模拟Data，实际Use时，需将其中的模拟Interface改为你的项目真实Interface。\n该模版Documentation所在目录（Relative tolayui.js）：\n/css/modules/layim/html/chatlog.html'
    }]
  }
  
  //console.log(param)
  
  var html = laytpl(LAY_tpl.value).render({
    data: res.data
  });
  $('#LAY_view').html(html);
  
});
</script>
</body>
</html>
